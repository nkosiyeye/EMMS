@model EMMS.Models.Asset;
@{

    ViewData["Title"] = "Register Asset";
    ViewData["asset"] = "active";
    //var assetTag = ViewData["assetTag"];//"EMMSASSET" + DateTime.Now.ToString("yyyyMMddHHmmss");
}
<div class="card">
    <div class="card-header d-flex justify-content-between align-items-center">
        <span>Register Asset</span>
        </div>
    <div class="card-body">
        <form class="bg-white" asp-action="RegisterAsset" asp-controller="AssetManagement" method="post">
            <h5 class="mb-3 mt-3">General Information</h5>
            <div class="row mb-3">
                <div class="col-md-6">
                    <label asp-for="AssetId" class="form-label required-field">Asset Tag</label>
                    <input asp-for="AssetId" type="text" id="asset-tag" class="form-control" value="@Model.AssetId" readonly>
                </div>

                <div class="col-md-6">
                    <label asp-for="Category" class="form-label required-field">Category</label>
                    <select asp-for="Category" id="category" class="form-select">
                        <option selected disabled>Select Category</option>
                        <option value="Medical">Medical</option>
                        <option value="Non-Medical">Non-Medical</option>
                    </select>
                </div>
            </div>
            <div class="row mb-3">
                <div class="col-md-6">
                    <label asp-for="SubCategory" for="subcategory" class="form-label required-field">SubCategory</label>
                    <select asp-for="SubCategory" id="subcategory" class="form-select">
                        <option>Select SubCategory</option>
                        <option>Ct-Scanner</option>
                        <option>Centrifuge</option>
                        <option>UltraSound Scanner</option>
                        <option>Oxygen Concentrator</option>
                        <option>Ventilator</option>
                        <option>Defibrillator</option>
                        <option>Dialysis Machine</option>
                        <option>Patient Monitor</option>
                        <option>Infusion Pump</option>
                    </select>
                </div>
                <div class="col-md-6">
                    <label asp-for="ItemName" for="item-name" class="form-label required-field">Item Name</label>
                    <input asp-for="ItemName" type="text" id="item-name" class="form-control">
                </div>
            </div>
            <h5 class="mb-3 mt-3">Technical Details</h5>
            <div class="row mb-3">
                <div class="col-md-6">
                    <label asp-for="Department" for="department" class="form-label required-field">Department</label>
                    <select asp-for="Department" id="department" class="form-select">
                        <option>Select Department</option>
                        <option>Lab</option>
                        <option>Radiology</option>
                        <option>ICU</option>
                        <option>OT</option>
                        <option>Ward</option>
                        <option>Pharmacy</option>
                        <option>Blood Bank</option>
                    </select>
                </div>

                <div class="col-md-6">
                    <label asp-for="Manufacturer" for="manufacturer" class="form-label required-field">Manufacturer</label>
                    <select asp-for="Manufacturer" id="manufacturer" class="form-select">
                        <option>Select Manufacturer</option>
                        <option>GE</option>
                        <option>Philips</option>
                        <option>Siemens</option>
                        <option>Samsung</option>
                        <option>Medtronic</option>
                        <option>Fujifilm</option>
                    </select>
                </div>
            </div>

            <div class="row mb-3">

                <div class="col-md-6">
                    <label asp-for="SerialNumber" for="serial-number" class="form-label required-field">Serial Number</label>
                    <input asp-for="SerialNumber" type="text" id="serial-number" class="form-control">
                </div>


                <div class="col-md-6">
                    <label asp-for="Model" for="model" class="form-label required-field">Model</label>
                    <input asp-for="Model" type="text" id="model" class="form-control">
                </div>
            </div>

            <!-- Placement -->
            <h5 class="mb-3 mt-3">Placement & Serviceability</h5>
            <div class="row g-3 mb-3">
                <div class="col-md-4">
                    <div class="border rounded p-3">
                        <div class="form-check">
                            <input asp-for="IsPlacement" type="checkbox" class="form-check-input" id="placement-checkbox" onchange="checkPlacement(this)">
                            <input type="hidden" value="false" id="IsPlacement" name="IsPlacement">
                            <label asp-for="IsPlacement" class="form-check-label fw-bold" for="placementCheck">
                                Placement
                            </label>
                            <div class="form-text text-muted">
                                Is this equipment placed by a vendor?
                            </div>
                        </div>
                        <div class="row mb-1 d-none" id="duration-field-container">
                            <div class="col-md-6">
                                <label asp-for="PlacementStartDate" for="start-field" class="form-label required-field">Start</label>
                                <input asp-for="PlacementStartDate" type="date" id="start-field" placeholder="Duration" class="form-control">
                            </div>
                            <div class="col-md-6">
                                <label asp-for ="PlacementEndDate" for="end-field" class="form-label required-field">End</label>
                                <input asp-for="PlacementEndDate" type="date" id="end-field" placeholder="Duration" class="form-control">
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Donated -->
                <div class="col-md-4">
                    <div class="border rounded p-3">
                        <div class="form-check">
                            <input asp-for="IsDonated" class="form-check-input" type="checkbox" id="donatedCheck">
                            <label asp-for="IsDonated" class="form-check-label fw-bold" for="donatedCheck">
                                Donated
                            </label>
                            <div class="form-text text-muted text-sm" style="font-size:small;">
                                Was this asset donated by an external party?
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="border rounded p-3">
                        <div class="form-check">
                            <input asp-for="IsServiceable" input type="checkbox" class="form-check-input" id="serviceable-checkbox" onchange="checkServiceable(this)">
                            <label asp-for="IsServiceable" class="form-check-label fw-bold" for="serviceableCheck">
                                Serviceable?
                            </label>
                            <div class="form-text text-muted">
                                Is this equipment serviceable?
                            </div>
                        </div>
                        <div class="row d-none" id="service-field-container">
                            <div class="col-md-6" id="duration(period)-field-container">
                                <label asp-for="ServicePeriod" for="period" class="form-label required-field" id="period">Period</label>
                                <select asp-for="ServicePeriod" id="period" class="form-select" aria-placeholder="interval(period)">
                                    <option>years</option>
                                    <option>months</option>
                                </select>
                            </div>
                            <div class="col-md-6" id="interval-field-container">
                                <label asp-for="ServiceInterval" for="interval" class="form-label required-field" id="interval">Interval</label>
                                <input asp-for="ServiceInterval" type="text" id="interval" placeholder="e.g every 6 months" class="form-control">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <h5 class="mb-3 mt-3">Procurement & Status</h5>
            <div class="row mb-3">
                <div class="col-md-6">
                    <label asp-for="Vendor" for="vendor" class="form-label required-field">Vendor</label>
                    <select asp-for="Vendor" id="vendor" class="form-select">
                        <option>Select Vendor</option>
                        <option>MOH</option>
                        <option>PERPFAR</option>
                        <option>ICAP</option>
                    </select>
                </div>

                <div class="col-md-6">
                    <label asp-for="ServiceProvider" for="service-provider" class="form-label required-field">Service Provider</label>
                    <select asp-for="ServiceProvider" id="service-provider" class="form-select">
                        <option>Select Service Provider</option>
                        <option>ASD</option>
                        <option>AVOMA</option>
                        <option>E-Medical</option>
                    </select>
                </div>
            </div>

            <div class="row mb-3">
                <div class="col-md-4">
                    <label asp-for="Status" for="status" class="form-label required-field">Status</label>
                    <select asp-for="Status" id="status" class="form-select" onchange="checkStatus(this)">
                        <option>New</option>
                        <option>Used</option>
                        <option>Refurbished</option>
                        <option>Decommisioned</option>
                    </select>
                </div>
                <div class="col-md-4">
                    <label asp-for="ProcurementDate" for="procurement-date" class="form-label required-field" id="procument-id">Procurement Date</label>
                    <input asp-for="ProcurementDate" type="date" id="procurement-date" class="form-control">
                </div>
                <div class="col-md-4">
                    <label asp-for="Cost" for="cost" class="form-label required-field" id="cost">Cost</label>
                    <input asp-for="Cost" type="text" id="cost" class="form-control">
                </div>
            </div>

            <div class="row mb-3">
                <div class="col-md-3">
                    <label asp-for="UnitOfMeasure" for="unit-of-measure" class="form-label">Unit of Measure</label>
                    <select asp-for="UnitOfMeasure" id="unit-of-measure" class="form-select">
                        <option>N/A</option>
                        <option>Unit</option>
                        <option>Piece</option>
                    </select>
                </div>
                <div class="col-md-3">
                    <label asp-for="Quantity" for="quantity" class="form-label">Quantity</label>
                    <input asp-for="Quantity" type="number" id="quantity" class="form-control">
                </div>
                <div class="col-md-3">
                    <label asp-for="LifespanPeriod" for="lifespan" class="form-label required-field" id="lifespan-id">Lifespan(Period)</label>
                    <select asp-for="LifespanPeriod" id="lifespan" class="form-select">
                        <option>years</option>
                        <option>months</option>
                    </select>
                </div>
                <div class="col-md-3">
                    <label asp-for="LifespanQuantity" for="quantitylifespan" class="form-label required-field" id="quantitylifespan">Lifespan</label>
                    <input asp-for="LifespanQuantity" type="number" id="quantity2" class="form-control">
                </div>
            </div>



            <div class="d-flex align-center justify-content-center" style="align-items:center">
                <button type="submit" class="btn btn-primary col-md-4">Submit</button>
            </div>
        </form>

        <script>
            function checkPlacement(checkbox) {
                const durationField = document.getElementById('duration-field-container');
                if (checkbox.checked) {
                    durationField.classList.remove('d-none');
                } else {
                    durationField.classList.add('d-none');
                }
            }
            function checkServiceable(checkbox) {
                const durationField = document.getElementById('service-field-container');
                if (checkbox.checked) {
                    durationField.classList.remove('d-none');
                } else {
                    durationField.classList.add('d-none');
                }
            }

            function checkStatus(select) {
              if(select.value === 'New'){
                document.getElementById('lifespan-id').classList.add("required-field")
                document.getElementById('procument-id').classList.add("required-field")
                document.getElementById('cost').classList.add("required-field")
                document.getElementById('quantitylifespan').classList.add("required-field")
              }else{
                document.getElementById('lifespan-id').classList.remove("required-field")
                document.getElementById('procument-id').classList.remove("required-field")
                document.getElementById('cost').classList.remove("required-field")
                document.getElementById('quantitylifespan').classList.remove("required-field")
              }
            }
        </script>
    </div>
</div>
